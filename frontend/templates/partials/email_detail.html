<div class="p-4 bg-gray-800 rounded-lg">
    <h2 class="text-2xl font-bold text-blue-300 mb-4">{{ email.subject }}</h2>
    
    <div class="bg-gray-700 p-4 rounded-lg mb-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300">
            <div>
                <span class="font-medium text-gray-400">Od:</span> 
                <span class="break-all">{{ email.sent_from }}</span>
            </div>
            <div>
                <span class="font-medium text-gray-400">Do:</span> 
                <span class="break-all">{{ email.sent_to }}</span>
            </div>
            <div>
                <span class="font-medium text-gray-400">Odebrano:</span> 
                <span>{{ email.date_received.strftime('%Y-%m-%d %H:%M') }}</span>
            </div>
            <div>
                <span class="font-medium text-gray-400">Kategoria:</span> 
                <span>{{ email.classification }}</span>
            </div>
        </div>
    </div>

    <div class="mb-6">
        <h3 class="text-lg font-semibold text-gray-300 mb-2">Treść wiadomości:</h3>
        <div class="bg-gray-700 p-4 rounded-lg text-gray-200 whitespace-pre-wrap">
            {{ email.body | safe }}
        </div>
    </div>

    {% if email.suggested_reply %}
    <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
        <h3 class="text-lg font-semibold text-blue-300 mb-2">Proponowana odpowiedź:</h3>
        <div class="text-gray-200 whitespace-pre-wrap">{{ email.suggested_reply }}</div>
    </div>
    {% endif %}

    <form hx-post="/emails/{{ email.email_id }}/reply"
          hx-target="#email-detail"
          hx-swap="innerHTML"
          class="mt-6">
        <h3 class="text-lg font-semibold text-gray-300 mb-3">Odpowiedz na wiadomość:</h3>
        <textarea name="response_text" rows="8" 
            class="w-full bg-gray-700 text-gray-200 border border-gray-600 rounded-lg p-3 mb-4
                   focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
                   placeholder-gray-500"
            placeholder="Wpisz treść odpowiedzi...">{{ email.response_text or "" }}</textarea>
        
        <button type="submit" 
                class="bg-blue-600 hover:bg-blue-500 text-white font-medium py-2 px-6 rounded-lg
                       transition-colors duration-200 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd" />
            </svg>
            Wyślij odpowiedź
        </button>
    </form>
</div>
