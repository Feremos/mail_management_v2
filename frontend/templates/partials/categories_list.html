<div class="mb-4">
  <h3 class="font-semibold text-blue-700 mb-3">Kategorie</h3>
  <div class="space-y-2 mb-4">
    <!-- Opcja "Wszystkie kategorie" -->
    <button 
      class="w-full text-left bg-blue-100 hover:bg-blue-200 border border-blue-300 hover:border-blue-400 rounded-lg px-4 py-3 transition-all duration-200 shadow-sm hover:shadow-md"
      hx-get="/emails?mode=html"
      hx-target="#emails-column"
      hx-swap="innerHTML">
      <div class="font-semibold text-blue-900">ðŸ“‚ Wszystkie maile</div>
    </button>
    {% for category in categories %}
      <div class="relative group">
        <button 
          class="w-full text-left bg-white hover:bg-blue-50 border border-blue-200 hover:border-blue-300 rounded-lg px-4 py-3 transition-all duration-200 shadow-sm hover:shadow-md"
          hx-get="/emails?category={{ category.name }}&mode=html"
          hx-target="#emails-column"
          hx-swap="innerHTML"
          data-category-btn
          data-category="{{ category.name }}"
          onclick="setCurrentCategory('{{ category.name }}')">
          <div class="font-medium text-blue-800">{{ category.name }}</div>
        </button>
        <button 
          hx-delete="/categories/{{ category.id }}" 
          hx-confirm="Na pewno chcesz usunÄ…Ä‡ kategoriÄ™ '{{ category.name }}'?"
          hx-target="closest .group"
          hx-swap="outerHTML"
          class="absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full text-xs font-bold opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center">
          âœ–
        </button>
      </div>
    {% else %}
      <div class="text-center py-4">
        <p class="text-blue-400 text-sm">Brak kategorii</p>
      </div>
    {% endfor %}
  </div>

  <form
    hx-post="/categories/add_user_category"
    hx-target="#categories-column"
    hx-swap="innerHTML"
    hx-on::after-request="if(event.detail.successful) this.reset()"
    class="flex space-x-2">
    <input
      type="text"
      name="category_name"
      placeholder="Nowa kategoria"
      required
      class="flex-grow rounded-lg border border-blue-300 focus:border-blue-500 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-20"
    />
    <button
      type="submit"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200">
      Dodaj
    </button>
  </form>
</div>